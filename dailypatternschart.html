<html>
<head>
</head>
<body>

    <script src="amcharts4/core.js"></script>
    <script src="amcharts4/charts.js"></script>
    <script src="amcharts4/themes/material.js"></script>

    <div id="chartdiv" style="width: 1000px; height: 400px;" align="center"></div>

    <script>
    
    am4core.useTheme(am4themes_material);

    function renderChart(apiData) {
        
        console.log('entered renderChart, apiData: ' + apiData);
        

   //     am4core.options.commercialLicense = true

   //     am4core.useTheme(am4themes_animated)
    //    am4core.useTheme(defaultTheme)

        let chartConfig = {
            fontSize: 11,
            xAxes: [
                {
                    type: 'DateAxis',
                    min: start.getTime(),
                    max: end.getTime(),
                    strictMinMax: true,
                    renderer: {
                        minGridDistance: 45
                    },
                    baseInterval: {
                        count: 1,
                        timeUnit: 'minute'
                    }
                }
            ],
            yAxes: [
                {
                    type: 'CategoryAxis',
                    dataFields: {
                        category: 'name'
                    },
                    renderer: {
                        minGridDistance: 20
                    }
                }
            ],
            series: [
                {
                    type: 'ColumnSeries',
                    dataFields: {
                        openDateX: 'start',
                        dateX: 'end',
                        categoryY: 'name'
                    },
                    columns: {
                        height: 20,
                        tooltipText: 'From: {openDateX.formatDate(\'hh:mm\')} To: {dateX.formatDate(\'hh:mm\')}'
                    }
                }
            ],
            scrollbarX: {
                startGrip: {
                    scale: 0.75
                },
                endGrip: {
                    scale: 0.75
                }
            },
            cursor: {
                type: 'XYCursor',
                behavior: 'zoomX'
            }
        }

        let chart = am4core.createFromConfig(chartConfig, "chartdiv", am4charts.XYChart)
        
        
        
        // update chart times
        let start = new Date(this.props.query.date);
        start.setHours(0, 0, 0, 0)
        let end = new Date(this.props.query.date);
        end.setHours(23, 59, 59, 999)

     //   console.log("UPDATING CHART AXES");
     //   console.log(this.chart.xAxes);
        chart.xAxes.getIndex(0).min = start.getTime();
        chart.xAxes.getIndex(0).max = end.getTime();


        chart.data = apiData;
    }
            
    </script>

</body>
</html>
